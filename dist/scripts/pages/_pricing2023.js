var _typePlan="yearly";let discount=0,costFinal=0,costNoDiscount=0,escalaContactsStarter=[30,15,15,15,15,10,10,10,10,10,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5],new_escalaContactsPro=[{range:[1,1],price:97},{range:[2,3],price:35},{range:[4,5],price:25},{range:[6,10],price:30},{range:[11,15],price:30},{range:[16,20],price:30},{range:[21,25],price:30},{range:[26,30],price:30},{range:[31,"infinite"],price:20}];function formula_infinite(t){t-=31;return t/=5,t=Math.floor(t),t*=20}function starter_convertUsers(t){return 1<=t._usersField?{starter:25*(t._usersField-1),pro:25*(t._usersField-1)}:{starter:0,pro:0}}function starter_calculateFinal(t){var e=starter_converContacts(t._contactsField),t=starter_convertUsers(t),t=12*(e=trimDecimals(e=e.starter+t.starter));jQuery(".pricingCard.starter .price .discountCost").html("<span>USD "+e+" <small>/ mes</small> </span>"),jQuery(".pricingCard.starter .elementBody .price .cost .ahorro ").html("Pago total de <strong>USD "+t+" / año</strong>")}function starter_getContactScale(e){let r={starter:0,pro:0};for(let t=1;t<=e;t++){var a=calculate_contact_per_steps(t);r.pro=a}if(e<=25)for(let t=0;t<e;t++)r.starter=r.starter+escalaContactsStarter[t];if(26<=e){for(let t=0;t<25;t++)r.starter=r.starter+escalaContactsStarter[t];r.starter=r.starter+4*(e-25)}return r}function starter_getContactScale(r){let a={starter:0,pro:0};for(let e=1;e<=r;e++){let t=calculate_contact_per_steps(e);a.pro=t}if(r<=25)for(let t=0;t<r;t++)a.starter=a.starter+escalaContactsStarter[t];if(26<=r){for(let t=0;t<25;t++)a.starter=a.starter+escalaContactsStarter[t];let t=r-25;a.starter=a.starter+4*t}return a}function starter_converContacts(t){t/=1e3,t=Math.trunc(t);return{starter:starter_getContactScale(t).starter,pro:starter_getContactScale(t).pro}}function calculate_contact_per_steps(e){let r=0;var a=new_escalaContactsPro.findIndex(t=>e>=t.range[0]&&e<=t.range[1]||e>=t.range[0]&&"infinite"===t.range[1]?t:void 0);if("infinite"!=new_escalaContactsPro[a].range[1])for(let t=0;t<=a;t++)r+=new_escalaContactsPro[t].price;else{for(let t=0;t<=a;t++)r+=new_escalaContactsPro[t].price;r+=formula_infinite(e)}return r}function getContactScale(e){let r={pro:0};for(let t=1;t<=e;t++){var a=calculate_contact_per_steps(t);r.pro=a}return r}function converContacts(t){t/=1e3;return{pro:getContactScale(t=Math.trunc(t)).pro}}function convertUsers(t){return 1<=t._usersField?{pro:25*(t._usersField-1)}:{pro:0}}function selectorSlizePlan(t){"monthly"==(_typePlan=t)&&(jQuery("[yearly_mode]").addClass("hideMode"),jQuery("[monthly_mode]").removeClass("hideMode")),"yearly"==_typePlan&&(jQuery("[monthly_mode]").addClass("hideMode"),jQuery("[yearly_mode]").removeClass("hideMode")),jQuery("form#formCalcGeneral_PRO").click()}function trimDecimals(t){return Number(Number(t).toFixed())==+Number(t)?t=Number(Number(t).toFixed()):t}function calculateFinal(r){var a=converContacts(r._contactsField),n=convertUsers(r),r="Si"===r._whatsappField?40:0;if(console.log("_typePlan",_typePlan),"monthly"==_typePlan){let t=null;costFinal=a.pro+n.pro+r,discount=0,t=12*costFinal,t=t.toFixed(2),t=trimDecimals(t),jQuery(".pricingCard.pro .elementBody .price .cost .ahorro ").html("Pago total de USD "+t+" / año")}if("yearly"==_typePlan){let t=null;let e=null;costFinal=a.pro+n.pro+r,t=12*costFinal,e=t-.2*t,discount=.2*costFinal,costNoDiscount=costFinal,costFinal-=discount,discount=discount.toFixed(2),costNoDiscount=costNoDiscount.toFixed(2),costFinal=costFinal.toFixed(2),t=t.toFixed(2),e=e.toFixed(2),costNoDiscount=trimDecimals(costNoDiscount),discount=trimDecimals(discount),t=trimDecimals(t),e=trimDecimals(e),jQuery(".pricingCard.pro .elementBody .price .cost .ahorro ").html(" Pago total de USD <span>"+t+"</span> - USD "+e+" / año")}costFinal=trimDecimals(costFinal),jQuery(".pricingCard.pro .price .discountCost").html("<span>USD "+costFinal+" <small>/ mes</small> </span>")}jQuery(document).ready(function(){selectorSlizePlan(_typePlan),jQuery(".field.number").each(function(){var r=jQuery(this),a=r.find('input[type="number"]'),t=r.find(".quantity-up"),e=r.find(".quantity-down"),n=a.attr("min"),o=a.attr("max");t.click(function(){var t=parseFloat(a.val()),e=a.attr("step");e=o<=t?t:t+Number(e),r.find("input").val(e),r.find("input").trigger("change")}),e.click(function(){var t=parseFloat(a.val()),e=a.attr("step");e=t<=n?t:t-Number(e),r.find("input").val(e),r.find("input").trigger("change")})}),jQuery(".field.select").each(function(){var t=jQuery(this),e=(t.find("select"),t.find(".quantity-up")),t=t.find(".quantity-down");e.click(function(){}),t.click(function(){})}),jQuery("form#formCalcGeneral_PRO").on("change click",async function(t){calculate=_serializeFormToObject(t.currentTarget),calculateFinal(calculate)}),jQuery("form#formCalcGeneral_STARTER").on("change",async function(t){calculate=_serializeFormToObject(t.currentTarget),console.log("calculos starter",calculate),starter_calculateFinal(calculate)})});