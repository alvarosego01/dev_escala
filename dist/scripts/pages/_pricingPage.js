let planSelect=null,calculate=null,device=null,typeProcess=0,_costStarter=30,_costPro=135,_contacts={},_users={},discount=0,costFinal=0,costNoDiscount=0,typeplan="yearly",escalaContactsStarter=[30,15,15,15,15,10,10,10,10,10,7,7,7,7,7,5,5,5,5,5,5,5,5,5,5],escalaContactsPro=[97,35,0,25,0,30,0,0,0,0,30,0,0,0,0,30,0,0,0,0,30,0,0,0,0],new_escalaContactsPro=[{range:[1,1],price:97},{range:[2,3],price:35},{range:[4,5],price:25},{range:[6,10],price:30},{range:[11,15],price:30},{range:[16,20],price:30},{range:[21,25],price:30},{range:[26,30],price:30},{range:[31,"infinite"],price:20}];function formula_infinite(e){e-=31;return e/=5,e=Math.floor(e),e*=20}function calculate_contact_per_steps(t){let r=0;0==t&&(t=1),console.log("que numero n",t);var a=new_escalaContactsPro.findIndex(e=>t>=e.range[0]&&t<=e.range[1]||t>=e.range[0]&&"infinite"===e.range[1]?e:void 0);if("infinite"!=new_escalaContactsPro[a].range[1]){console.log("entonces no es infinito");for(let e=0;e<=a;e++)r+=new_escalaContactsPro[e].price}else{console.log("entonces es infinito");for(let e=0;e<=a;e++)r+=new_escalaContactsPro[e].price;r+=formula_infinite(t)}return console.log("index",a),console.log("aux result",r),r}function getContactScale(t){let r={starter:0,pro:0};for(let e=0;e<t;e++){var a=calculate_contact_per_steps(e);r.pro=a,console.log("que coño retorna aux",a)}if(t<=25)for(let e=0;e<t;e++)r.starter=r.starter+escalaContactsStarter[e];if(26<=t){for(let e=0;e<25;e++)r.starter=r.starter+escalaContactsStarter[e];r.starter=r.starter+4*(t-25)}return r}function converContacts(e){e/=1e3;return{starter:getContactScale(e=Math.trunc(e)).starter,pro:getContactScale(e).pro}}function convertUsers(e){return"starter"==e._typePlan||"pro"==e._typePlan?2<=e._userAccess[typeProcess]?{starter:15*(e._userAccess[typeProcess]-1),pro:15*(e._userAccess[typeProcess]-1)}:{starter:0,pro:0}:void 0}function typeCustomPay(e,t){jQuery(".selectorPricingButton").removeClass("active"),jQuery(t).addClass("active"),typeplan=e;e=jQuery("form#formCalcGeneral");calculate=_serializeFormToObject(e),calculateFinal(calculate)}function selectPlanMobile(e,t){jQuery(".buttonSelectPlan-Mobile").removeClass("active"),"starter"==t&&(jQuery("#checkStarter")[0].click(),jQuery(e).addClass("active")),"pro"==t&&(jQuery("#checkPro")[0].click(),jQuery(e).addClass("active"))}function redondeaAlAlza(e,t){let r=Math.floor(e/t);return r!=e/t&&r++,r*t}function percentOfRange(e,t,r,a,n,l){if("rangeToNumber"==a){if(0==e)return jQuery(".contactsField").val(1e3),1e3;n=(e-t)/(r-t)*100/100*(l-n)+n;return n=redondeaAlAlza(n=Math.trunc(n),-1e3),jQuery(".contactsField").val(n),n}}function calculateRangeValue(e){let t=0;t=e._rangeContacts[typeProcess],setAllField(t,".rangeContacts");e=jQuery(".rangeContacts").attr("min_aux"),e=parseInt(e);return t=parseInt(t),t<=95&&(t+=e),0<=t&&t<=25?percentOfRange(t,0,25,"rangeToNumber",1e3,25e3):25<=t&&t<=50?percentOfRange(t,24,48,"rangeToNumber",25e3,5e4):50<=t&&t<=75?percentOfRange(t,48,73,"rangeToNumber",5e4,75e3):75<=t&&t<=100?percentOfRange(t,73,100,"rangeToNumber",75e3,1e5):void 0}function revealMobileView(e=null,t){null!=e&&("open"==e&&(jQuery("#"+t+" .versionMobile2022 .preView").hide(),jQuery("#"+t+" .versionMobile2022 .fullView").show()),"close"==e&&(jQuery("#"+t+" .versionMobile2022 .fullView").hide(),jQuery("#"+t+" .versionMobile2022 .preView").show(),0==jQuery(".modePlanSelect")[0].checked&&jQuery(".modePlanSelect")[0].click()))}function calculateFinal(r){if(_contacts=converContacts(r._contactsField[typeProcess]),_users=convertUsers(r),"monthly"==typeplan&&("starter"==r._typePlan&&(costFinal=_contacts.starter+_users.starter,discount=0,jQuery("form#formCalcGeneral .implementacion").removeClass("aux_visible"),jQuery("form#formCalcGeneral .implementacion").addClass("aux_hidden")),"pro"==r._typePlan&&(costFinal=_contacts.pro+_users.pro,discount=0,jQuery("form#formCalcGeneral .implementacion").removeClass("aux_hidden"),jQuery("form#formCalcGeneral .implementacion").addClass("aux_visible")),jQuery(".offert").css({visibility:"hidden"}),jQuery("form#formCalcGeneral .ahorro").removeClass("aux_visible"),jQuery("form#formCalcGeneral .ahorro").addClass("aux_hidden")),"yearly"==typeplan){let e=null;let t=null;"starter"==r._typePlan&&(costFinal=_contacts.starter+_users.starter,e=12*costFinal,t=e-.2*e,jQuery("form#formCalcGeneral .implementacion").removeClass("aux_visible"),jQuery("form#formCalcGeneral .implementacion").addClass("aux_hidden")),"pro"==r._typePlan&&(costFinal=_contacts.pro+_users.pro,e=12*costFinal,t=e-.2*e,jQuery("form#formCalcGeneral .implementacion").removeClass("aux_hidden"),jQuery("form#formCalcGeneral .implementacion").addClass("aux_visible")),discount=.2*costFinal,costNoDiscount=costFinal,costFinal-=discount,discount=discount.toFixed(2),costNoDiscount=costNoDiscount.toFixed(2),costFinal=costFinal.toFixed(2),e=e.toFixed(2),t=t.toFixed(2),costNoDiscount=trimDecimals(costNoDiscount),discount=trimDecimals(discount),e=trimDecimals(e),t=trimDecimals(t),jQuery(".offert").css({visibility:"visible"}),jQuery("form#formCalcGeneral .ahorro").removeClass("aux_hidden"),jQuery("form#formCalcGeneral .ahorro").addClass("aux_visible"),jQuery("form#formCalcGeneral .ahorro ").html("Pago total de <span>USD "+e+"</span> <strong>- USD "+t+" / año</strong>"),jQuery("form#formCalcGeneral .discountExtra").removeClass("aux_hidden"),jQuery("form#formCalcGeneral .discountExtra").addClass("aux_visible"),jQuery("form#formCalcGeneral .discountExtra .discounter").text("USD "+e+" / anual"),jQuery("#priceDotted").text("USD "+costNoDiscount+" /mes")}costFinal=trimDecimals(costFinal),jQuery("#finalPriceCalc").text("USD "+costFinal+" / mes")}function trimDecimals(e){return Number(Number(e).toFixed())==+Number(e)?e=Number(Number(e).toFixed()):e}function actionInfoCards(e){"open"==e&&(jQuery(".extendButton").css({display:"none"}),jQuery(".hideButton").css({display:"block"}),jQuery(".featuresPrice").css({display:"none"}),jQuery(".featuresPrice.extendDetails").css({display:"block"})),"close"==e&&(jQuery(".hideButton").css({display:"none"}),jQuery(".extendButton").css({display:"block"}),jQuery(".featuresPrice").css({display:"block"}),jQuery(".featuresPrice.extendDetails").css({display:"none"}))}function discountByPlanCard(e,t){if(null!=e){if(1==t.checked&&0<jQuery("[typeplan="+e+"]").length)return jQuery(".modePlanSelect").prop("checked",!0),jQuery(".discountCost").css({display:"flex"}),jQuery(".numerCost").css({display:"none"}),jQuery('[typeplan*="plan"]').css({display:"block"}),jQuery(".ncost").css({display:"block"}),jQuery(".price").css({"margin-bottom":"60px"}),jQuery("#plan3.elementParent .middle .innerMiddle").removeClass("reduceDiv"),_costStarter=21,_costPro=95,jQuery("[calculator_price_starter]").text("USD "+_costStarter),jQuery("[calculator_price_pro]").text("USD "+_costPro),void setEnableElements("pro");0==t.checked&&0<jQuery("[typeplan="+e+"]").length&&(jQuery(".modePlanSelect").prop("checked",!1),jQuery(".discountCost").css({display:"none"}),jQuery(".numerCost").css({display:"block"}),jQuery('[typeplan*="plan"]').css({display:"none"}),jQuery(".ncost").css({display:"none"}),jQuery(".price").css({"margin-bottom":"60px"}),jQuery("#plan3.elementParent .middle .innerMiddle").addClass("reduceDiv"),_costStarter=30,_costPro=135,jQuery("[calculator_price_starter]").text("USD "+_costStarter),jQuery("[calculator_price_pro]").text("USD "+_costPro),setEnableElements("starter"))}}function planSelectProcess(e){if("plan1"==e&&(jQuery("#checkStarter").click(),planSelect=e,jQuery("small[mobPlan]").text("Plan Starter"),jQuery("[alertPlanPro]").css({display:"block"}),setConfigModeSelect("starter")),"plan2"==e&&(jQuery("#checkPro").click(),planSelect=e,jQuery("small[mobPlan]").text("Plan Pro"),jQuery("[alertPlanPro]").css({display:"block"}),setConfigModeSelect("pro")),"plan3"==e)return planSelect=e,jQuery("[regularPlansCalc]").css({display:"none"}),void jQuery("[enterprisePlanCalc]").css({display:"block"});jQuery("[regularPlansCalc]").css({display:"block"}),jQuery("[enterprisePlanCalc]").css({display:"none"})}function setConfigModeSelect(e){var t=jQuery(e).val(),r=jQuery("input.rangeContacts").val(),e=jQuery("input.contactsField").val(),r=parseInt(r),e=parseInt(e);"starter"==t&&(jQuery(".rangeContacts").attr("min_aux","0"),jQuery(".contactsField").attr("min","1000"),jQuery(".rangeContacts").css({"background-image":"none"}),jQuery("[scaleStarter]").css({display:"flex"}),jQuery("[scalePro]").css({display:"none"}),0<r&&0<e?(setAllField(r,".rangeContacts"),setAllField(e,".contactsField")):(setAllField(0,".rangeContacts"),setAllField(1e3,".contactsField")),clickAllField(".rangeContacts")),"pro"==t&&(jQuery(".rangeContacts").attr("min_aux","1"),jQuery(".contactsField").attr("min","1000"),jQuery(".rangeContacts").css({"background-image":"none"}),jQuery("[scaleStarter]").css({display:"none"}),jQuery("[scalePro]").css({display:"flex"}),0<r&&1e3<=e?(setAllField(r,".rangeContacts"),setAllField(e,".contactsField")):(setAllField(0,".rangeContacts"),setAllField(1e3,".contactsField")),clickAllField(".rangeContacts"))}function preventContactField(){jQuery("input.contactsField").on("change click",function(){let e=jQuery(this).val();var t=jQuery(this).attr("min");if(e=parseInt(e),t=parseInt(t),e<t||Number.isNaN(e)){e=t,jQuery(".rangeContacts").val(0),clickAllField(".rangeContacts");var r=e%1e3;return 0<r&&(e=e-r+1e3),void setAllField(e,"input.contactsField")}r=e%1e3;0<r&&(e=e-r+1e3),setAllField(e,"input.contactsField");let a=e/1e3;a=Math.trunc(a),1e3==t&&(a-=5),jQuery(".rangeContacts").val(a),clickAllField(".rangeContacts")}),jQuery("input.contactsField").on("keydown",function(e){"Enter"===event.key&&(jQuery("#formCalcGeneral").trigger("_action"),jQuery(this).click())}),jQuery("input.userAccess").on("keydown",function(e){"Enter"===event.key&&(jQuery(this).click(),jQuery("#formCalcGeneral").trigger("_action"))})}function setAllField(r,e){null==e||0<(e=jQuery(e)).length&&jQuery.each(e,function(e,t){jQuery(t).val(r)})}function clickAllField(e){null==e||0<(e=jQuery(e)).length&&jQuery.each(e,function(e,t){jQuery(t).click()})}function setEnableElements(e){jQuery(".anualElement").removeClass("aux_hidden"),jQuery(".monthElement").removeClass("aux_hidden"),"pro"==e&&(jQuery(".anualElement").addClass("aux_visible"),jQuery(".monthElement").addClass("aux_hidden")),"starter"==e&&(jQuery(".monthElement").addClass("aux_visible"),jQuery(".anualElement").addClass("aux_hidden"))}jQuery(document).ready(function(){jQuery("#checkPro").click(),setEnableElements("pro"),device=deviceType(),preventContactField(),jQuery(".modePlanSelect").click(),jQuery("input.rangeContacts").click(),jQuery("input[type=range]").on("load click change",function(){var e=100*((jQuery(this).val()-jQuery(this).attr("min"))/(jQuery(this).attr("max")-jQuery(this).attr("min")));jQuery(this).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+e+"%, #97C7D1), color-stop("+e+"%, #D9EEF9))"),jQuery(this).css("background-image","-moz-linear-gradient(left center, #97C7D1 0%, #97C7D1 "+e+"%, #D9EEF9 "+e+"%, #D9EEF9 100%)")}),jQuery("input[type=range]").on("input change",function(e){var t=100*((jQuery(this).val()-jQuery(this).attr("min"))/(jQuery(this).attr("max")-jQuery(this).attr("min")));jQuery(this).css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+t+"%, #97C7D1), color-stop("+t+"%, #D9EEF9))"),jQuery(this).css("background-image","-moz-linear-gradient(left center, #97C7D1 0%, #97C7D1 "+t+"%, #D9EEF9 "+t+"%, #D9EEF9 100%)")}),jQuery("form#formCalcGeneral").on("change _action",async function(e){e.preventDefault(),jQuery(e.target).attr("typeProcess")&&(typeProcess=jQuery(e.target).attr("typeProcess")),calculate=_serializeFormToObject(e.currentTarget),jQuery(e.target).is(".rangeContacts")&&(calculate._contactsField[typeProcess]=calculateRangeValue(calculate)),calculateFinal(calculate);e=jQuery("input.contactsField[typeProcess="+typeProcess+"]").val(),e=parseInt(e);console.log("la eme",e),1e5<e?(jQuery(".showInfosection").css({display:"none"}),jQuery(".finalButtons").css({display:"none"}),jQuery(".showInfosection.outLimit").css({display:"flex"}),jQuery(".finalButtons.outLimit").css({display:"flex"})):(jQuery(".showInfosection").css({display:"flex"}),jQuery(".finalButtons").css({display:"flex"}),jQuery(".showInfosection.outLimit").css({display:"none"}),jQuery(".finalButtons.outLimit").css({display:"none"}))})});