console.log("pricing pro");var _typePlan="yearly";let discount=0,costFinal=0,costNoDiscount=0,new_escalaContactsPro=[{range:[1,1],price:97},{range:[2,3],price:35},{range:[4,5],price:25},{range:[6,10],price:30},{range:[11,15],price:30},{range:[16,20],price:30},{range:[21,25],price:30},{range:[26,30],price:30},{range:[31,"infinite"],price:20}];function formula_infinite(e){e-=31;return e/=5,e=Math.floor(e),e*=20}function calculate_contact_per_steps(t){let n=0;var o=new_escalaContactsPro.findIndex(e=>t>=e.range[0]&&t<=e.range[1]||t>=e.range[0]&&"infinite"===e.range[1]?e:void 0);if("infinite"!=new_escalaContactsPro[o].range[1])for(let e=0;e<=o;e++)n+=new_escalaContactsPro[e].price;else{for(let e=0;e<=o;e++)n+=new_escalaContactsPro[e].price;n+=formula_infinite(t)}return n}function getContactScale(t){let n={pro:0};for(let e=1;e<=t;e++){var o=calculate_contact_per_steps(e);n.pro=o}return n}function converContacts(e){e/=1e3;return{pro:getContactScale(e=Math.trunc(e)).pro}}function convertUsers(e){return 1<=e._usersField?{pro:25*(e._usersField-1)}:{pro:0}}function selectorSlizePlan(e){"monthly"==(_typePlan=e)&&(jQuery("[yearly_mode]").addClass("hideMode"),jQuery("[monthly_mode]").removeClass("hideMode")),"yearly"==_typePlan&&(jQuery("[monthly_mode]").addClass("hideMode"),jQuery("[yearly_mode]").removeClass("hideMode"))}function trimDecimals(e){return Number(Number(e).toFixed())==+Number(e)?e=Number(Number(e).toFixed()):e}function calculateFinal(e){var n=converContacts(e._contactsField),o=convertUsers(e),r=0+("Si"===e._whatsappField?40:0)+("Si"===e._iaField?40:0);if(console.log("la suma",r),"monthly"==_typePlan){let e=null;costFinal=n.pro+o.pro+r,discount=0,e=12*costFinal,e=e.toFixed(2),e=trimDecimals(e),jQuery("form#formCalcGeneral .ahorro ").html("Inversión total <strong>USD "+e+" / año</strong>")}if("yearly"==_typePlan){let e=null;let t=null;costFinal=n.pro+o.pro+r,e=12*costFinal,t=e-.2*e,discount=.2*costFinal,costNoDiscount=costFinal,costFinal-=discount,discount=discount.toFixed(2),costNoDiscount=costNoDiscount.toFixed(2),costFinal=costFinal.toFixed(2),e=e.toFixed(2),t=t.toFixed(2),costNoDiscount=trimDecimals(costNoDiscount),discount=trimDecimals(discount),e=trimDecimals(e),t=trimDecimals(t),jQuery("form#formCalcGeneral .ahorro ").html("Pago total de <span>USD "+e+"</span> <strong>- USD "+t+" / año</strong>")}costFinal=trimDecimals(costFinal),resize_byResult(costFinal),jQuery(".price .discountCost").html("<span>USD "+costFinal+" <small>/ mes</small> </span>")}function resize_byResult(e){return 6<e.length&&e.length<8?jQuery(".discountCost").addClass("md"):8<=e.length?(jQuery(".discountCost").removeClass("md"),jQuery(".discountCost").addClass("sm")):jQuery(".discountCost").removeClass("md sm")}jQuery(document).ready(function(){selectorSlizePlan(_typePlan),jQuery(".field.number").each(function(){var n=jQuery(this),o=n.find('input[type="number"]'),e=n.find(".quantity-up"),t=n.find(".quantity-down"),r=o.attr("min"),a=o.attr("max");e.click(function(){var e=parseFloat(o.val()),t=o.attr("step");t=a<=e?e:e+Number(t),n.find("input").val(t),n.find("input").trigger("change")}),t.click(function(){var e=parseFloat(o.val()),t=o.attr("step");t=e<=r?e:e-Number(t),n.find("input").val(t),n.find("input").trigger("change")})}),jQuery(".field.select").each(function(){var e=jQuery(this),t=(e.find("select"),e.find(".quantity-up")),e=e.find(".quantity-down");t.click(function(){}),e.click(function(){})}),jQuery("form#formCalcGeneral").on("change",async function(e){calculate=_serializeFormToObject(e.currentTarget),calculateFinal(calculate)})});